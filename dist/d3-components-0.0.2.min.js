/*! D3 Components v0.0.2 | (c) 2016 Zan Pan | MIT license */
d3.defaultOptions={id:"chart",renderer:"svg",width:300,aspectRatio:.618034,color:"#1f77b4",colorScheme:d3.schemeCategory10,stroke:"none",strokeWidth:1},d3.parseData=function(t,e){return t},d3.parseOptions=function(t,e){var a=e.defaults;for(var r in a)a.hasOwnProperty(r)&&!e.hasOwnProperty(r)&&(e[r]=a[r]);e.defaults={};var n=d3.defaultOptions,i=e.id||n.id,o=d3.select("#"+i);if(!e.hasOwnProperty("width")){var s=parseInt(o.style("width"))||n.width;e.width=Math.round(s)}if(!e.hasOwnProperty("height")){var d=e.aspectRatio||n.aspectRatio,h=parseInt(o.style("height"))||e.width*d;e.height=Math.round(h)}for(var r in n)n.hasOwnProperty(r)&&!e.hasOwnProperty(r)&&(e[r]=n[r]);e.canvas=o;var l=document.getElementById(i);return"CANVAS"===l.tagName&&(e.renderer="canvas",o=l),"canvas"===e.renderer?("CANVAS"!==l.tagName&&(o=document.createElement("canvas"),l.appendChild(o)),o.width=e.width,o.height=e.height,e.context=o.getContext("2d")):e.context=null,e},d3.pieChart=function(t,e){var a={type:"pie",plot:"pieChart",maxRatio:.8,innerRadius:0,sort:null,labels:{show:!1,data:function(t){return t.label||t.name}},legends:{show:!0,data:function(t){return t.label||t.name}}};e.defaults=a,t=d3.parseData(t,e),e=d3.parseOptions(t,e);var r=e.renderer,n=e.canvas,i=e.context,o=e.width,s=e.height,d=e.sort,h=e.stroke,l=e.strokeWidth,c=e.colorScheme,u=e.maxRatio,p=e.innerRadius,f=e.outerRadius||Math.min(o,s)/2;"number"==typeof p&&"number"==typeof f&&(p=Math.min(p,f*u));var v=d3.scaleOrdinal(c),g=d3.pie().sort(d).value(function(t){return t.value})(t),w=d3.arc().innerRadius(p).outerRadius(f).context(i);if("svg"===r){var m="translate("+o/2+","+s/2+")",y=n.append("svg").attr("width",o).attr("height",s).attr("transform",m).attr("stroke",h).attr("stroke-width",l),O=y.selectAll(".arc").data(g).enter().append("g").attr("class","arc");O.append("path").attr("d",w).attr("fill",function(t){return v(t.value)})}else"canvas"===r&&(i.translate(o/2,s/2),g.forEach(function(t,e){i.beginPath(),w(t),i.fillStyle=c[e],i.fill()}),"none"!==h&&(i.beginPath(),g.forEach(w),i.strokeStyle=h,i.lineWidth=l,i.stroke()))};